<div class="container">
  <div class="row h-100">
    <div class="col d-flex align-items-center justify-content-center">
      <div class="img-wrapper h-75">
        <img
          src="img/gestone.png"
          class="img-fluid w-75 mx-auto d-block"
          alt=""
        />
      </div>
      <div class="card text-bg-dark w-50">
        <div class="card-body d-flex flex-column justify-content-between">
          <div class="card-header mb-3">
            <h4 class="card-title text-center">Olá! Bom ver você por aqui.</h4>
            <h5 class="card-subtitle text-center">
              Preencha as informações e prossiga
            </h5>
          </div>
          <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <!-- Campo de Email -->
            <div>
              <label for="email" class="form-label mb-0">Email</label>
              <input
                id="email"
                type="email"
                class="form-control mb-3"
                formControlName="email"
                [readonly]="isEmailVerified"
              />
              @if (!isEmailVerified) {
              <div class="d-flex justify-content-end mt-3">
                <button
                  type="button"
                  class="btn btn-warning"
                  (click)="verifyEmail()"
                  [disabled]="isEmailVerified"
                >
                  @if (isProcessing) {
                  <div class="spinner-border spinner-border-sm" role="status">
                    <span class="visually-hidden">Loading...</span>
                  </div>
                  Verificando } @else { Verificar Email }
                </button>
              </div>
              }
            </div>
            @if (isEmailVerified === true && isUserInfosFilled === false) {
            <div formGroupName="userDetails">
              <h5 class="text-center">Outras informações</h5>
              <label for="name" class="form-label mb-0">Nome</label>
              <input
                id="name"
                type="text"
                class="form-control mb-3"
                formControlName="name"
              />

              <label for="phone" class="form-label mb-0">Telefone</label>
              <input
                id="phone"
                type="text"
                class="form-control mb-3"
                formControlName="phone"
              />

              <label for="password" class="form-label mb-0">Senha</label>
              <input
                id="password"
                type="password"
                class="form-control"
                formControlName="password"
              />
              <div class="d-flex justify-content-end mt-3">
                <button
                  type="button"
                  class="btn btn-warning"
                  (click)="enableMarbleshopDetails()"
                >
                  Continuar
                </button>
              </div>
            </div>
            } @if (isEmailVerified === true && isUserInfosFilled === true) {
            <div formGroupName="marbleshopDetails">
              <h5 class="text-center">Informações da Marmoraria</h5>
              <label for="marbleshopName" class="form-label mb-0">Nome</label>
              <input
                id="marbleshopName"
                type="text"
                class="form-control mb-3"
                formControlName="marbleshopName"
              />

              <label for="marbleshopEmail" class="form-label mb-0">Email</label>
              <input
                id="marbleshopEmail"
                type="email"
                class="form-control mb-3"
                formControlName="marbleshopEmail"
              />

              <label for="marbleshopPhone" class="form-label mb-0"
                >Telefone</label
              >
              <input
                id="marbleshopPhone"
                class="form-control mb-3"
                type="text"
                formControlName="marbleshopPhone"
              />
              <div class="d-flex justify-content-end">
                <button type="submit" class="btn btn-warning">
                  Finalizar Cadastro
                </button>
              </div>
            </div>
            }
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
